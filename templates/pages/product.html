{% extends 'base.html' %} 

{% block head %}
  <title>{{product.title}}</title>
{% endblock %}


{% block content %}
  {% if product %}
    <div>
      <div class="grid gap-8 md:grid-cols-2">
        <!-- images - start -->
        <div class="space-y-4">
          <div class="relative overflow-hidden rounded-lg bg-gray-100">
            <img
              id="main-image"
              src="/static/media/{{product.image}}"
              loading="lazy"
              alt="Photo by Himanshu Dewangan"
              class="h-full  w-full object-cover object-center"
            />
          </div>

          <div class="flex border rounded-md gap-4">
            {% for image in product.images.all %}
              <div class="overflow-hidden h-20 w-20 rounded-lg bg-gray-100">
                <img
                  src="/static/media/{{image}}"
                  loading="lazy"
                  alt="Photo by Himanshu Dewangan"
                  class="item-image h-full w-full hover:opacity-85 object-cover object-center"
                />
              </div>
            {% endfor %}
          </div>
        </div>
        <!-- images - end -->

        <!-- content - start -->
        <div class="">
          <!-- name - start -->
          <div class="mb-2 md:mb-3">
          <span class="mb-0.5 inline-block text-gray-500">{{product.category}}</span>
          <h2 class="text-2xl font-bold text-gray-800 lg:text-3xl capitalize">{{product.title}}</h2>
          </div>
          <!-- name - end -->

          <!-- color - start -->
          <div class="mb-4">
          <span class="mb-3 inline-block text-sm font-semibold text-gray-500 md:text-base">Color</span>

          <div class="flex flex-wrap gap-2">
              <span class="h-8 w-8 rounded-full border bg-gray-800 ring-2 ring-gray-800 ring-offset-1 transition duration-100"></span>
              <button type="button" class="h-8 w-8 rounded-full border bg-gray-500 ring-2 ring-transparent ring-offset-1 transition duration-100 hover:ring-gray-200"></button>
              <button type="button" class="h-8 w-8 rounded-full border bg-gray-200 ring-2 ring-transparent ring-offset-1 transition duration-100 hover:ring-gray-200"></button>
              <button type="button" class="h-8 w-8 rounded-full border bg-white ring-2 ring-transparent ring-offset-1 transition duration-100 hover:ring-gray-200"></button>
          </div>
          </div>
          <!-- color - end -->

          <!-- size - start -->
          <div class="mb-4">
          <span class="mb-3 inline-block text-sm font-semibold text-gray-500 md:text-base">Variants</span>

            <div class="flex flex-wrap gap-3">
                <button type="button" class="flex h-8 w-12 items-center justify-center rounded-md border bg-white text-center text-sm font-semibold text-gray-800 transition duration-100 hover:bg-gray-100 active:bg-gray-200">XS</button>
                <button type="button" class="flex h-8 w-12 items-center justify-center rounded-md border bg-white text-center text-sm font-semibold text-gray-800 transition duration-100 hover:bg-gray-100 active:bg-gray-200">S</button>
                <span class="flex h-8 w-12 cursor-default items-center justify-center rounded-md border border-indigo-500 bg-indigo-500 text-center text-sm font-semibold text-white">M</span>
                <button type="button" class="flex h-8 w-12 items-center justify-center rounded-md border bg-white text-center text-sm font-semibold text-gray-800 transition duration-100 hover:bg-gray-100 active:bg-gray-200">L</button>
                <span class="flex h-8 w-12 cursor-not-allowed items-center justify-center rounded-md border border-transparent bg-white text-center text-sm font-semibold text-gray-400">XL</span>
            </div>
          </div>
          <!-- size - end -->

          <!-- price - start -->
          <div class="mb-4">
          <div class="flex items-end gap-2">
              <span class="text-xl font-bold text-gray-800 md:text-2xl">${{product.price}}</span>
              <span class="mb-0.5 text-red-500 line-through">${{product.prev_price}}</span>
          </div>

          <span class="text-sm text-gray-500">incl. VAT plus shipping</span>
          </div>
          <!-- price - end -->

          <!-- shipping notice - start -->
          <div class="mb-6 flex items-center gap-2 text-gray-500">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path d="M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0" />
          </svg>

          <span class="text-sm">2-4 day shipping</span>
          </div>
          <!-- shipping notice - end -->

          <!-- buttons - start -->
          <div class="bg-gray-200 md:bg-transparent fixed bottom-0 right-0 left-0 w-full flex items-center p-2 gap-4 md:static gap-2.5">
            <!-- <input name="quantity" value="1"  class="block border p-2 rounded-md w-4/12" type="number" /> -->
            <button data-id='{{product.id}}'  id='add-cart-btn' class="w-[50%] flex-grow rounded-lg bg-indigo-500 px-8 py-3 text-center text-sm font-semibold text-white outline-none ring-indigo-300 transition duration-100 hover:bg-indigo-600 focus-visible:ring active:bg-indigo-700 sm:flex-none md:text-base">Add to cart</button>
            {% include 'partials/_buynow.html' %}

          </div>
          <!-- buttons - end -->
        </div>
      </div>
    </div>
    
    
    <div class="mt-4">
    <div class="mb-3 text-lg font-semibold text-gray-800">Description</div>

    <p class="text-gray-500">
        {{product.description}}
    </p>
    </div>

    <section class="py-8">
      <h2 class="text-2xl font-bold text-center text-gray-800 lg:text-3xl block mb-4">Related</h2>
  
      <div class="grid gap-x-4 gap-y-8 sm:grid-cols-2 md:gap-x-6 lg:grid-cols-3">
       {% for rproduct in related_products %}
        <div>
          <a href="#" class="group relative mb-2 block h-60 overflow-hidden rounded-lg bg-gray-100 lg:mb-3">
            <img src="/static/media/{{rproduct.image}}" loading="lazy" alt="Photo by Rachit Tank" class="h-full w-full object-cover object-center transition duration-200 group-hover:scale-110" />

            <span class="absolute left-0 top-0 rounded-br-lg bg-red-500 px-3 py-1.5 text-sm uppercase tracking-wider text-white">sale</span>
          </a>

          <div>
            <a href="#" class="hover:gray-800 mb-1 text-gray-500 transition duration-100 lg:text-lg">{{rproduct.title}}</a>

            <div class="flex items-end gap-2">
              <span class="font-bold text-gray-800 lg:text-lg">${{rproduct.price}}</span>
              <span class="mb-0.5 text-red-500 line-through">${{rproduct.prev_price}}</span>
            </div>
          </div>
        </div>
       {% endfor %}
      </div>
    </section>

  <!-- content - end -->
  {% else %}
    <p>No product found</p>
  {% endif %}
  

{% endblock %} ◘◘
